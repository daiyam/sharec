#!/usr/bin/env node
/* eslint-disable */
const minimist = require('minimist')
const sharec = require('../src')
const { _, ...options } = minimist(process.argv.slice(2))

;(async () => {
  if (!process.env.PWD || process.env.PWD === process.env.INIT_CWD) return

  const [command = 'install'] = _
  const isVersionCommand = command === 'version' || options.v || options.version

  await sharec({
    configsPath: process.env.PWD,
    targetPath: process.env.INIT_CWD,
    command: isVersionCommand ? 'version' : command,
    options,
  })
})()
